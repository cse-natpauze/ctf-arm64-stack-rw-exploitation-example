#!/bin/python3

# a small interface for the c program.
# takes user input 
# connects to the socket, sends the msg len then the msg. 
# should get it back and echo to terminal

from encodings import utf_8
import socket

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(("localhost", 3000))

txt: str = input()
txt += '\n'
# although out target machine is big-endian (aarch64) we need to send out data in reverse byte order 
txt_len = len(txt).to_bytes(8,byteorder='little')
print(txt_len)
s.send(bytes(txt_len))
#s.send(bytes("test","utf-8"))
s.send(bytes(txt,"utf-8"))
print("done sending, received:")
response = s.recv(len(txt))
print(response)